1. Introduction.

This package was created to enhance the function of munin when collecting statistics through
congested networks from worker nodes distributed across North America. It specifically adds
the following features:

o Persistent storage for the statistics generated by the munin plugins. The plugins configured
  on a worker node are executed by a new script called "munin-node-redis" which saves all the
  data gathered in a Redis key/value (database) store. Subsequently, the data can be retrieved
  and saved by the munin master node when network bandwidth is available.

o Because the data is no longer gatherd in real time by the munin master, a UTC timestamp is
  generated on the munin worker node and associated with each Redis database entry.

o When creating the rrd files, this package changes the number of slots for the five minute
  averages. Normally, five minute averages are retained for two weeks. This package will 
  cause five minute averges to be retained for one year.

2. Prerequisites.

This package reguires the following additional packages to be in stalled prior to its
installation. 

On the munin master node:

o redis
o munin-1.4.5 (munin-common-1.4.5)

On a munin worker node:

o redis
o munin-node-1.4.5 (munin-common-1.4.5)

This installation scripts of this package also assume that it will be installed on an RPM
based linux distribution. 

3. Files.

The package contains the following:

./bin/mg							"mg" stands for "munin graph". This can create
									munin graphs for any time range that's in the rrd
									database. Running the command without arguments
									provides syntax.
./bin/munin-node-redis				Worker node script to run the munin plugins and 
										gather statistics.
./bin/Node.pm_redis					Master node perl library module updated to provide
										communication with the redis database.
./bin/UpdateWorker.pm_redis			Master node perl library module updated to provide
										communication with the redis database.
./cron/munin-node-redis				Worker node crontab to be place in /etc/cron.d
./etc/munin-node-redis.conf			Sample overide file (see 4.1 below).
./INSTALL-both						Installation script for a node that will be both
										a master and a worker node.
./INSTALL-munin						Installation script for a master node.
./INSTALL-munin-node				Installation script for a worker node.
./README							This README file.

4. Installation.

4.1 Worker Node.

o Ensure prerequisites installed.
o As root, run the INSTALL-munin-node.
o Modify worker node's firewall to allow a munin master access to redis through port 6379.
o If required, modify the sample /etc/munin/munin-node-redis.conf configuration file. Normally,
  munin-node-redis uses the "ALLOW" statements in the standard munin-node.conf file to determine
  which master nodes will be retrieving data. It is assumed that all master nodes will be retrieving
  data through redis, and a dedicated stack is provided for each one of them. If this is not the
  case, this file should be used as a replacement specification so as to avoid stacking data
  unnecessarily.

4.2 Master Node.

o Ensure prerequisites installed.
o As root, run the INSTALL-munin.
o Modify the master node's munin configuration (/etc/munin/munin.conf) to access redis
on a munin worker. The following example illustrates a munin master that is gathering data
in the traditional way from one worker node and from redis on a second worker node:

# a simple host tree
#[localhost]
#   address 127.0.0.1
#   use_node_name yes

[first.sample.host.ca]
   address 192.168.2.45

[second.sample.host.ca]
   address 192.168.2.46
      port 6379

